<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Blog Data Creator</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { display: grid; place-items: center; min-height: 100vh; background-color: #f3f4f6; }
        .btn { padding: 1rem 2rem; font-size: 1.25rem; font-weight: 600; border-radius: 0.5rem; cursor: pointer; }
        #log { margin-top: 1rem; padding: 1rem; background: white; border-radius: 0.5rem; width: 500px; height: 200px; overflow-y: auto; font-family: monospace; }
    </style>
</head>
<body>
    <div class="text-center">
        <button id="create-data-btn" class="btn bg-indigo-600 text-white hover:bg-indigo-700">
            Create Sample Blog Data
        </button>
        <div id="log">Waiting to start...</div>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
        // --- THIS LINE IS FIXED ---
        import { getFirestore, writeBatch, doc, serverTimestamp, collection } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

        // --- PASTE YOUR FIREBASE CONFIG HERE ---
        const firebaseConfig = {
            apiKey: "AIzaSyDuqswofpquk8aUbCOZCGjdYLUivBEh7a8",
            authDomain: "ardaycaawiye-18b89.firebaseapp.com",
            projectId: "ardaycaawiye-18b89",
            storageBucket: "ardaycaawiye-18b89.firebasestorage.app",
            messagingSenderId: "590874185284",
            appId: "1:590874185284:web:6ee7df602c45068e38b611",
            measurementId: "G-SBGSTJWDMR"
        };
        // -----------------------------------------

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);
        const log = document.getElementById('log');
        const btn = document.getElementById('create-data-btn');

        btn.onclick = async () => {
            if (!confirm("Are you sure you want to add sample blog data? This will overwrite posts with IDs 'sample-post-1' and 'sample-post-2'.")) {
                return;
            }

            btn.disabled = true;
            btn.textContent = "Working...";
            log.innerHTML = "Starting batch write...<br>";

            try {
                const batch = writeBatch(db);

                // --- Post 1 ---
                const post1Ref = doc(db, "blogPosts", "sample-post-1");
                batch.set(post1Ref, {
                    title: "Getting Started with Firebase",
                    author: "Admin",
                    category: "Technology",
                    tags: ["firebase", "frontend", "database"],
                    status: "Published",
                    publishDate: serverTimestamp(),
                    content: { ops: [
                        { insert: "Firebase is a powerful platform." },
                        { attributes: { header: 1 }, insert: "\nWhat is Firestore?" },
                        { insert: "\nIt's a NoSQL document database that lets you easily store, sync, and query data for your mobile and web apps.\n" }
                    ]},
                    featureImage: "https://images.unsplash.com/photo-1488590528505-98d2b5aba04b?auto=format&fit=crop&w=800&q=60",
                    attachments: [],
                    views: 1520,
                    commentsCount: 2,
                    createdAt: serverTimestamp()
                });
                log.innerHTML += "Added Post 1 to batch.<br>";

                // --- Post 2 ---
                const post2Ref = doc(db, "blogPosts", "sample-post-2");
                batch.set(post2Ref, {
                    title: "My Favorite JavaScript Frameworks",
                    author: "Jane Doe",
                    category: "Guides",
                    tags: ["javascript", "react", "vue"],
                    status: "Draft",
                    publishDate: null,
                    content: { ops: [{ insert: "React, Vue, and Svelte are all great options..." }] },
                    featureImage: null,
                    attachments: [
                        { name: "framework-comparison.pdf", url: "https://mockstorage.com/framework-comparison.pdf" }
                    ],
                    views: 0,
                    commentsCount: 0,
                    createdAt: serverTimestamp()
                });
                log.innerHTML += "Added Post 2 to batch.<br>";

                // --- Comments for Post 1 ---
                const comment1Ref = doc(collection(db, "blogComments"));
                batch.set(comment1Ref, {
                    postId: "sample-post-1",
                    author: "CodeNewbie",
                    email: "newbie@test.com",
                    date: serverTimestamp(),
                    text: "Great article! This really helped me understand Firestore.",
                    status: "Approved",
                    reply: null
                });
                log.innerHTML += "Added Comment 1 to batch.<br>";
                
                const comment2Ref = doc(collection(db, "blogComments"));
                batch.set(comment2Ref, {
                    postId: "sample-post-1",
                    author: "CSS_Master",
                    email: "master@test.com",
                    date: serverTimestamp(),
                    text: "I still prefer SQL databases. This NoSQL stuff is confusing.",
                    status: "Pending",
                    reply: null
                });
                log.innerHTML += "Added Comment 2 to batch.<br>";

                const comment3Ref = doc(collection(db, "blogComments"));
                batch.set(comment3Ref, {
                    postId: "sample-post-1",
                    author: "SPAM_BOT_9000",
                    email: "spam@bot.com",
                    date: serverTimestamp(),
                    text: "Buy my amazing crypto course now!!! www.notascam.com",
                    status: "Spam",
                    reply: null
                });
                log.innerHTML += "Added Comment 3 to batch.<br>";

                // Commit the batch
                await batch.commit();

                log.innerHTML += "<br><strong>SUCCESS!</strong><br>Sample data has been written to your Firebase project.<br>You can now open the main admin page.";
                btn.textContent = "Data Created!";
                btn.classList.remove("bg-indigo-600");
                btn.classList.add("bg-green-600");

            } catch (error) {
                console.error("Error writing sample data: ", error);
                log.innerHTML += `<br><strong style="color: red;">ERROR:</strong> ${error.message}`;
                btn.textContent = "Failed!";
                btn.disabled = false;
            }
        };
    </script>
</body>
</html>
